<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">

    <title>Quarteria</title>

    <!-- Switch for local -->
    <!-- <link href="/public/assets/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://quarteria.herokuapp.com/public/assets/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Montserrat:200,400" rel="stylesheet">
  </head>

  <body>

    <style>
      .btn-secondary:not(:disabled):not(.disabled).active, .btn-secondary:not(:disabled):not(.disabled):active, .show>.btn-secondary.dropdown-toggle {
        background: #41ada4;
        border: none;
        border-color: #41ada4;
        border-width: 0px;
        border-radius: 0px;
        border-radius: 0px;
        font-weight: bold;
      }

      body {
        font-family: 'Montserrat', sans-serif;
      }

      .btn-secondary.focus, .btn-secondary:focus {
        box-shadow: 0 0 0 0;
      }

      .btn-secondary {
        background: none;
        border-width: 0px;
        border-color: #41ada4;
      }

      .btn-secondary:hover {
        color: #fff;
        background-color: #41ada4;
        border-color: #41ada4;
        border-width: 0px;
        border-radius: 0px;
        border-radius: 0px;
        border: none;
      }

      .btn-primary {
        color: #fff;
        background-color: #41ada4;
        border-color: #fff;
      }

      .btn-primary:hover {
        color: #fff;
        background-color: #217e76;
        border-color: #fff;
      }

    </style>

    <header>
      <div class="collapse" id="navbarHeader">
        <div class="container" style="background: yellow;">
          <div class="row">
            <div class="col-sm-8 col-md-7 py-4">
              <h4 class="text-white">About</h4>
              <p class="text-muted">Exmaple text area</p>
            </div>
            <div class="col-sm-4 offset-md-1 py-4">
              <h4 class="text-white">Contact</h4>
              <ul class="list-unstyled">
                <li><a href="#" class="text-white">Example 1</a></li>
                <li><a href="#" class="text-white">Example 1</a></li>
                <li><a href="#" class="text-white">Example 1</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="navbar">
        <div class="container d-flex justify-content-between">
          <a href="#" class="navbar-brand d-flex align-items-center">
            <img src="http://quarteria.herokuapp.com/public/assets/img/global/logo.png" width="300px" height="auto" />
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
    </header>

    <main role="main">

      <section style="background: linear-gradient(to right, #0d4a72, #41ada4); height: 50px;">
        <div class="container" style="padding-top: 15px;">
          <span style="color: white; margin-top: 5px;">SEARCH. RENT. BUY. SELL. <span style="font-weight: bold;">DREAM</span></span>
        </div>
      </section>

      <div class="album py-5">
        <div class="container">

          <div class="row">

            <div class="col-md-2"></div>
            <div class="col-md-8" style="height: 400px;">

              <img src="http://quarteria.herokuapp.com/public/assets/img/home/hero.jpeg" style="width: 100%;" height="auto" />

              <div style="width: 100%; height: 185px; float: left; background: linear-gradient(to right, #0d4a72, #41ada4);">

                <div style="float: left; width: 100%; margin-bottom: 15px;">

                  <div class="btn-group btn-group-toggle" data-toggle="buttons" style="margin-left: 20px; float: left; margin-top: 20px;">
                    <label class="btn btn-secondary active">
                      <input type="radio" name="options" id="option1" autocomplete="off" checked> Buy
                    </label>
                    <label class="btn btn-secondary">
                      <input type="radio" name="options" id="option2" autocomplete="off"> Rent
                    </label>
                  </div>

                  <div style="float: left; margin-top: 40px; margin-left: 300px; font-size: 12px; left: 300px; font-weight: bold; color: white;">
                    PRICE RANGE
                  </div>

                </div>


                <input type="text" class="form-control search-entry" style="width: 240px; float: left; margin-left: 20px;" placeholder="Address, Street City, Country, Agent">

                <select class="form-control" style="width: 100px; float:left; margin-left: 10px;">
                  <option>+ 0 mi</option>
                  <option>Option 1</option>
                  <option>Option 2</option>
                  <option>Option 3</option>
                  <option>Option 4</option>
                </select>

                <select class="form-control" style="width: 100px; float:left; margin-left: 10px;">
                  <option>No Mimimum</option>
                  <option>Option 1</option>
                  <option>Option 2</option>
                  <option>Option 3</option>
                  <option>Option 4</option>
                </select>

                <select class="form-control" style="width: 100px; float:left; margin-left: 10px;">
                  <option>No Maximum</option>
                  <option>Option 1</option>
                  <option>Option 2</option>
                  <option>Option 3</option>
                  <option>Option 4</option>
                </select>

                <div style="float: left; width: 100%; margin-top:15px;">
                  <button type="button" class="btn btn-primary search-button" style="display: block; margin-top: 20px; margin: auto;">SEARCH NOW</button>
                </div>

              </div>

            </div>
            <div class="col-md-2"></div>




            <span class="where-results-live col-md-12">


            </span>






















            <style>


            .image_container {
              width: 100%;
              float: left;
            }
            .image_property {
              float: left;
              width: 100%;
            }
            .attr_label {
              font-size: 14px;

            }


            @media (min-width: 768px) {
              .image_container {
                width: 217px;
                float: left;
              }
              .image_property {
                float: left;
                width: 101px;
              }
              .attr_img {
                width: 20px;
              }
              .attr_label {
                font-size: 9px;
                margin-top: 7px;
              }
            }
            @media (min-width: 992px) {
              .image_container {
                width: 297px;
                float: left;
              }
              .image_property {
                float: left;
                width: 141px;
              }
              .attr_img {
                width: 30px;
              }
              .attr_label {
                font-size: 14px;
                margin-top: 7px;
              }
            }

            @media (min-width: 1200px) {
              .image_container {
                width: 357px;
                float: left;
              }
              .image_property {
                float: left;
                width: 171px;
              }
              .attr_img {
                width: 40px;
              }
              .attr_label {
                font-size: 14px;
                margin-top: 12px;
              }

            }
            </style>



          </div>
        </div>
      </div>

    </main>

    <footer class="text-muted">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
        <p>Filler area</p>
      </div>
    </footer>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

    <!-- Switch for local -->
    <!-- <script src="/public/assets/js/bootstrap.min.js"></script> -->
    <script src="https://quarteria.herokuapp.com/public/assets/js/bootstrap.min.js"></script>

    <!-- Switch for local -->
    <!-- <script src="/public/assets/js/parse.min.js"></script> -->
    <script src="https://quarteria.herokuapp.com/public/assets/js/parse.min.js"></script>


    <script src="https://quarteria.herokuapp.com/public/assets/js/handlebars.min-latest.js"></script>






    <script id="entry-template" type="text/x-handlebars-template">
      <div class="col-md-6" style="height: 290px; float: left;">
        <a href="https://quarteria.herokuapp.com/detail?id={{object_id}}">
        <div style="float: left; width: 100%; height: 225px; overflow: hidden;">
          <div style="background-color: #0d4a72; position: absolute; right: 15px; top: 15px; height: 40px; width: 150px; color: white; padding: 8px; padding-left: 15px;">
            ${{price}}
          </div>
          <img src="{{img_src}}" style="width: 100%;" height="auto" />
        </div>
        <div style="background-color: #41ada4; float: left; width: 100%; height: 40px; padding: 8px; padding-left: 10px; color: white;">
          {{address}}, <span style="font-weight:bold;">{{state}} | {{country}}</span>
        </div>
      </a>
      </div>
    </script>



    <script>

      Parse.initialize("G3HfIqqEKtetc6GzLV6gU1P8FRZdBRVW");
      Parse.serverURL = 'https://quarteria.herokuapp.com/parse'

      var GameScore = Parse.Object.extend("Properties");
      var query = new Parse.Query(GameScore);
      query.limit(8);
      query.find({
        success: function(results) {

          var source   = document.getElementById("entry-template").innerHTML;
          var template = Handlebars.compile(source);

          var finalHtml = "";

          for(i = 0; i < results.length; i++) {
            console.log("hello");

            var context = {
              object_id: results[i].id,
              price: results[i].get("price_dollar"),
              img_src: results[i].get("img_hero")._url,
              address: results[i].get("street_address"),
              state:results[i].get("state"),
              country: results[i].get("country")
            };
            finalHtml = finalHtml + template(context);
          }

          console.log(finalHtml);
          $('.where-results-live').html(finalHtml);

        },
        error: function(error) {
          alert("Error: " + error.code + " " + error.message);
        }
      });






      $('.search-button').on('click', function() {

        console.log("Clicked!");

        var GameScore = Parse.Object.extend("Properties");
        var query = new Parse.Query(GameScore);
        query.fullText('name', $('.search-entry').val());

        query.find({
          success: function(results) {

            var source   = document.getElementById("entry-template").innerHTML;
            var template = Handlebars.compile(source);

            $('.where-results-live').html("");
            var finalHtml = "";

            for(i = 0; i < results.length; i++) {
              console.log("hello");

              var context = {
                object_id: results[i].id,
                price: results[i].get("price_dollar"),
                img_src: results[i].get("img_hero")._url,
                address: results[i].get("street_address"),
                state:results[i].get("state"),
                country: results[i].get("country")
              };
              finalHtml = finalHtml + template(context);
            }

            $('.where-results-live').html(finalHtml);

          },
          error: function(error) {
            alert("Error: " + error.code + " " + error.message);
          }
        });


      })


      //
      // var url_string = window.location.href; //window.location.href
      // var url = new URL(url_string);
      // var c = url.searchParams.get("id");
      //
      // var GameScore = Parse.Object.extend("Properties");
      // var query = new Parse.Query(GameScore);
      // query.get(c, {
      //   success: function(gameScore) {
      //
      //     $('.parse_country').text(gameScore.get("country"));
      //
      //     $('.parse_address').text(gameScore.get("street_address"));
      //     $('.parse_city').text(gameScore.get("city"));
      //     $('.parse_state').text(gameScore.get("state"));
      //
      //     $('.parse_build').text(gameScore.get("build"));
      //     $('.parse_lot_size').text(gameScore.get("lot_size")+" sq ft.");
      //     $('.parse_bedrooms').text(gameScore.get("bedrooms"));
      //     $('.parse_prop_area').text(gameScore.get("prop_area")+" sq ft.");
      //
      //     $('.parse_description').text(gameScore.get("description"));
      //     $('.parse_price').text(gameScore.get("price_dollar"));
      //
      //     $('.parse_img_hero').attr("src",gameScore.get("img_hero")._url);
      //
      //     $('.parse_img_1').attr("src",gameScore.get("img_1")._url);
      //     $('.parse_img_2').attr("src",gameScore.get("img_2")._url);
      //     $('.parse_img_3').attr("src",gameScore.get("img_3")._url);
      //     $('.parse_img_4').attr("src",gameScore.get("img_4")._url);
      //
      //   },
      //   error: function(object, error) {
      //     // The object was not retrieved successfully.
      //     // error is a Parse.Error with an error code and message.
      //   }
      // });






    </script>





  </body>
</html>
